@let listProductsVar = listProducts();

<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Productos</ion-title>
  </ion-toolbar>

  <ion-searchbar animated="true" show-clear-button="always" placeholder="Buscar" color="medium" (keydown.enter)="searchProduct($event)"></ion-searchbar>
</ion-header>

<ion-content [scrollEvents]="true" class="ion-padding">
  <div id="container-strong">
    <ion-toolbar color="">
      <ion-title class="ion-text-center">Productos</ion-title>
    </ion-toolbar>

    @for (product of listProductsVar; track $index) {
      <ion-card>
        <img alt="Silhouette of mountains" [src]="urlImage() + getImageProduct(product.images)" />
        <ion-card-header>
          <ion-card-title>{{ product.title | titlecase}}</ion-card-title>
          <ion-card-subtitle>{{ product.brand }}</ion-card-subtitle>
        </ion-card-header>

        <ion-card-content>
          <ion-list>
            <ion-item>
              <ion-label>
                <h3>Precio: ${{ product.price | number }}</h3>
                <h3>Cantidad: {{ product.stock }}</h3>
              </ion-label>
            </ion-item>
            <ion-item>
              <ion-label>
                <h3>Descripción</h3>
                <p>{{ product.description }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
          <ion-button expand="block" [routerLink]="['/detail-product', product.slug]">Ver Producto</ion-button>
          <ion-button expand="block" color="success">
            Añadir al Carro
            <ion-icon slot="end" name="cart"></ion-icon>
          </ion-button>
        </ion-card-content>
      </ion-card>
    } @empty {
      <ion-card>
        <ion-card-header>
          <ion-card-title>No hay productos</ion-card-title>
        </ion-card-header>
      </ion-card>
    }
  </div>
</ion-content>

